{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Card, Button } from 'semantic-ui-react';\nimport Campaign from '../../ethereum/campaign';\nimport Layout from '../../components/Layout';\nimport ContributeForm from '../../components/contributeForm';\nimport { Grid, Image } from 'semantic-ui-react';\nimport { Link } from '../../routes';\nimport web3 from '../../ethereum/web3';\n\nvar Compaignshow =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Compaignshow, _React$Component);\n\n  function Compaignshow() {\n    _classCallCheck(this, Compaignshow);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Compaignshow).apply(this, arguments));\n  }\n\n  _createClass(Compaignshow, [{\n    key: \"renderCards\",\n    value: function renderCards() {\n      var _this$props = this.props,\n          address = _this$props.address,\n          minimunContribute = _this$props.minimunContribute,\n          balance = _this$props.balance,\n          requetcount = _this$props.requetcount,\n          approvesCount = _this$props.approvesCount,\n          manager = _this$props.manager;\n      var items = [{\n        header: manager,\n        meta: '管理者地址',\n        description: '众筹受益人',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: minimunContribute,\n        meta: '最小贡献量',\n        description: '如果你想投资，至少需要大于当前金额',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: requetcount,\n        meta: '请求数量',\n        description: '当前管理者创建请求从合约中提出，必须大于50%的投资人同意',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: approvesCount,\n        meta: '投资人的数量',\n        description: '已经为当前众筹投资的投资人数量',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }, {\n        header: web3.utils.fromWei(balance, 'ether'),\n        meta: '当前的众筹金额(ether)',\n        description: '当前的众筹中，还剩下了多少的金额',\n        style: {\n          overflowWrap: 'break-word'\n        }\n      }];\n      return __jsx(Card.Group, {\n        items: items\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var summary = this.props.summary;\n      return __jsx(Layout, null, __jsx(\"h1\", null, \" \\xA0\\u4F17\\u7B79\\u8BE6\\u60C5 \"), __jsx(Grid, null, __jsx(Grid.Row, null, __jsx(Grid.Column, {\n        width: 10\n      }, this.renderCards()), __jsx(Grid.Column, {\n        width: 6\n      }, __jsx(ContributeForm, {\n        address: this.props.address\n      }))), __jsx(Grid.Row, null, __jsx(Grid.Column, {\n        width: 10\n      }, __jsx(Link, {\n        route: \"/compaigns/\".concat(this.props.address, \"/requests\")\n      }, __jsx(\"a\", null, __jsx(Button, {\n        primary: true\n      }, \" \\xA0\\u67E5\\u770B\\u8BF7\\u6C42\\xA0\")))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(props) {\n        var campaign, summary;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                //console.log(props.query.address);\n                campaign = Campaign(props.query.address);\n                _context.next = 3;\n                return campaign.methods.getsSummary().call();\n\n              case 3:\n                summary = _context.sent;\n                return _context.abrupt(\"return\", {\n                  address: props.query.address,\n                  minimunContribute: summary[0],\n                  balance: summary[1],\n                  requetcount: summary[2],\n                  approvesCount: summary[3],\n                  manager: summary[4]\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Compaignshow;\n}(React.Component);\n\nexport default Compaignshow;","map":{"version":3,"sources":["/Users/eigen/Desktop/fullstackdapp/pages/compaigns/show.js"],"names":["React","Card","Button","Campaign","Layout","ContributeForm","Grid","Image","Link","web3","Compaignshow","props","address","minimunContribute","balance","requetcount","approvesCount","manager","items","header","meta","description","style","overflowWrap","utils","fromWei","summary","renderCards","campaign","query","methods","getsSummary","call","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Card,Button} from 'semantic-ui-react';\nimport Campaign from '../../ethereum/campaign';\nimport Layout from '../../components/Layout';\nimport ContributeForm from '../../components/contributeForm';\nimport { Grid,Image } from 'semantic-ui-react';\nimport{Link} from '../../routes';\n\nimport web3 from '../../ethereum/web3';\nclass Compaignshow extends React.Component{\n\n\n  static async getInitialProps(props){\n\n\n//console.log(props.query.address);\n\n const campaign = Campaign(props.query.address);\n\n const summary = await campaign.methods.getsSummary().call();\n// console.log(summary);\n\nreturn {\n\n   address:props.query.address,\n   minimunContribute:summary[0],\n   balance:summary[1],\n   requetcount:summary[2],\n   approvesCount:summary[3],\n\n   manager:summary[4]\n\n};\n  }\n\n renderCards(){\n   const {\n     address,\n     minimunContribute,\n     balance,\n     requetcount,\n     approvesCount,\n\n     manager\n   }=this.props;\n\n   const items = [\n\n    {\n      header:manager,\n      meta:'管理者地址',\n      description:'众筹受益人',\n      style:{overflowWrap:'break-word'}\n    },\n    {\n      header:minimunContribute,\n      meta:'最小贡献量',\n      description:'如果你想投资，至少需要大于当前金额',\n      style:{overflowWrap:'break-word'}\n    },\n    {\n    header:requetcount,\n    meta:'请求数量',\n    description:'当前管理者创建请求从合约中提出，必须大于50%的投资人同意',\n    style:{overflowWrap:'break-word'}\n    },\n    {\n      header:approvesCount,\n      meta:'投资人的数量',\n      description:'已经为当前众筹投资的投资人数量',\n      style:{overflowWrap:'break-word'}\n    },\n    {\n    header:web3.utils.fromWei(balance,'ether'),\n    meta:'当前的众筹金额(ether)',\n    description:'当前的众筹中，还剩下了多少的金额',\n    style:{overflowWrap:'break-word'}\n    },\n\n\n   ];\n\n    return <Card.Group items={items}/>\n }\n\n  render(){\n\n   const summary = this.props.summary;\n\n\n\n\n\n    return(\n\n     <Layout>\n\n     <h1>  众筹详情 </h1>\n\n     <Grid>\n     <Grid.Row>\n\n     <Grid.Column width={10}>\n          {this.renderCards()}\n\n     </Grid.Column>\n\n    <Grid.Column width={6}>\n               <ContributeForm   address={this.props.address}/>\n    </Grid.Column>\n     </Grid.Row>\n\n      <Grid.Row>\n         <Grid.Column width={10}>\n      <Link route={`/compaigns/${this.props.address}/requests`}>\n      <a>\n    <Button primary>  查看请求 </Button>\n    </a>\n    </Link>\n      </Grid.Column>\n    </Grid.Row>\n\n\n\n\n     </Grid>\n\n</Layout>\n\n   );\n  }\n\n\n}\n\nexport default Compaignshow;\n"]},"metadata":{},"sourceType":"module"}