{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { Card, Button } from 'semantic-ui-react';\nimport Campaign from '../../ethereum/campaign';\nimport Layout from '../../components/Layout';\nimport ContributeForm from '../../components/contributeForm';\nimport { Grid, Image } from 'semantic-ui-react';\nimport { Link } from '../../routes';\nimport web3 from '../../ethereum/web3';\n\nclass Compaignshow extends React.Component {\n  static async getInitialProps(props) {\n    //console.log(props.query.address);\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getsSummary().call(); // console.log(summary);\n\n    return {\n      address: props.query.address,\n      minimunContribute: summary[0],\n      balance: summary[1],\n      requetcount: summary[2],\n      approvesCount: summary[3],\n      manager: summary[4]\n    };\n  }\n\n  renderCards() {\n    const {\n      address,\n      minimunContribute,\n      balance,\n      requetcount,\n      approvesCount,\n      manager\n    } = this.props;\n    const items = [{\n      header: manager,\n      meta: '管理者地址',\n      description: '众筹受益人',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: minimunContribute,\n      meta: '最小贡献量',\n      description: '如果你想投资，至少需要大于当前金额',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: requetcount,\n      meta: '请求数量',\n      description: '当前管理者创建请求从合约中提出，必须大于50%的投资人同意',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: approvesCount,\n      meta: '投资人的数量',\n      description: '已经为当前众筹投资的投资人数量',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: web3.utils.fromWei(balance, 'ether'),\n      meta: '当前的众筹金额(ether)',\n      description: '当前的众筹中，还剩下了多少的金额',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }];\n    return __jsx(Card.Group, {\n      items: items\n    });\n  }\n\n  render() {\n    const summary = this.props.summary;\n    return __jsx(Layout, null, __jsx(\"h1\", null, \" \\xA0\\u4F17\\u7B79\\u8BE6\\u60C5 \"), __jsx(Grid, null, __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 10\n    }, this.renderCards()), __jsx(Grid.Column, {\n      width: 6\n    }, __jsx(ContributeForm, {\n      address: this.props.address\n    }))), __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 10\n    }, __jsx(Link, {\n      route: `/compaigns/${this.props.address}/requests`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true\n    }, \" \\xA0\\u67E5\\u770B\\u8BF7\\u6C42\\xA0\")))))));\n  }\n\n}\n\nexport default Compaignshow;","map":{"version":3,"sources":["/Users/eigen/Desktop/fullstackdapp/pages/compaigns/show.js"],"names":["React","Card","Button","Campaign","Layout","ContributeForm","Grid","Image","Link","web3","Compaignshow","Component","getInitialProps","props","campaign","query","address","summary","methods","getsSummary","call","minimunContribute","balance","requetcount","approvesCount","manager","renderCards","items","header","meta","description","style","overflowWrap","utils","fromWei","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Card,Button} from 'semantic-ui-react';\nimport Campaign from '../../ethereum/campaign';\nimport Layout from '../../components/Layout';\nimport ContributeForm from '../../components/contributeForm';\nimport { Grid,Image } from 'semantic-ui-react';\nimport{Link} from '../../routes';\n\nimport web3 from '../../ethereum/web3';\nclass Compaignshow extends React.Component{\n\n\n  static async getInitialProps(props){\n\n\n//console.log(props.query.address);\n\n const campaign = Campaign(props.query.address);\n\n const summary = await campaign.methods.getsSummary().call();\n// console.log(summary);\n\nreturn {\n\n   address:props.query.address,\n   minimunContribute:summary[0],\n   balance:summary[1],\n   requetcount:summary[2],\n   approvesCount:summary[3],\n\n   manager:summary[4]\n\n};\n  }\n\n renderCards(){\n   const {\n     address,\n     minimunContribute,\n     balance,\n     requetcount,\n     approvesCount,\n\n     manager\n   }=this.props;\n\n   const items = [\n\n    {\n      header:manager,\n      meta:'管理者地址',\n      description:'众筹受益人',\n      style:{overflowWrap:'break-word'}\n    },\n    {\n      header:minimunContribute,\n      meta:'最小贡献量',\n      description:'如果你想投资，至少需要大于当前金额',\n      style:{overflowWrap:'break-word'}\n    },\n    {\n    header:requetcount,\n    meta:'请求数量',\n    description:'当前管理者创建请求从合约中提出，必须大于50%的投资人同意',\n    style:{overflowWrap:'break-word'}\n    },\n    {\n      header:approvesCount,\n      meta:'投资人的数量',\n      description:'已经为当前众筹投资的投资人数量',\n      style:{overflowWrap:'break-word'}\n    },\n    {\n    header:web3.utils.fromWei(balance,'ether'),\n    meta:'当前的众筹金额(ether)',\n    description:'当前的众筹中，还剩下了多少的金额',\n    style:{overflowWrap:'break-word'}\n    },\n\n\n   ];\n\n    return <Card.Group items={items}/>\n }\n\n  render(){\n\n   const summary = this.props.summary;\n\n\n\n\n\n    return(\n\n     <Layout>\n\n     <h1>  众筹详情 </h1>\n\n     <Grid>\n     <Grid.Row>\n\n     <Grid.Column width={10}>\n          {this.renderCards()}\n\n     </Grid.Column>\n\n    <Grid.Column width={6}>\n               <ContributeForm   address={this.props.address}/>\n    </Grid.Column>\n     </Grid.Row>\n\n      <Grid.Row>\n         <Grid.Column width={10}>\n      <Link route={`/compaigns/${this.props.address}/requests`}>\n      <a>\n    <Button primary>  查看请求 </Button>\n    </a>\n    </Link>\n      </Grid.Column>\n    </Grid.Row>\n\n\n\n\n     </Grid>\n\n</Layout>\n\n   );\n  }\n\n\n}\n\nexport default Compaignshow;\n"]},"metadata":{},"sourceType":"module"}